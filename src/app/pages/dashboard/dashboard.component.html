<div class="grid">
    <div class="col-12 md:col-4">
        <p-card styleClass="bg-blue-50 border-blue-200 border-1">
            <div class="flex justify-content-between align-items-center mb-3">
                <div class="text-blue-600 font-medium text-xl">Faturamento Total</div>
                <div class="flex align-items-center justify-content-center bg-blue-100 border-round"
                    style="width: 2.5rem; height: 2.5rem">
                    <i class="pi pi-dollar text-blue-500 text-xl"></i>
                </div>
            </div>
            <div class="text-900 font-bold text-3xl mb-3">{{ faturamentoHoje | currency:'BRL' }}</div>
            <span class="text-500 text-sm">Total no período filtrado</span>
        </p-card>
    </div>

    <div class="col-12 md:col-4">
        <p-card styleClass="bg-indigo-50 border-indigo-200 border-1">
            <div class="flex justify-content-between align-items-center mb-3">
                <div class="text-indigo-600 font-medium text-xl">Vendas Realizadas</div>
                <div class="flex align-items-center justify-content-center bg-indigo-100 border-round"
                    style="width: 2.5rem; height: 2.5rem">
                    <i class="pi pi-shopping-cart text-indigo-500 text-xl"></i>
                </div>
            </div>
            <div class="text-900 font-bold text-3xl mb-3">{{ qtdVendasHoje }}</div>
            <span class="text-500 text-sm">Pedidos concluídos no período</span>
        </p-card>
    </div>

    <div class="col-12 md:col-4">
        <p-card styleClass="bg-red-50 border-red-200 border-1">
            <div class="flex justify-content-between align-items-center mb-3">
                <div class="text-red-600 font-medium text-xl">Produtos em Falta</div>
                <div class="flex align-items-center justify-content-center bg-red-100 border-round"
                    style="width: 2.5rem; height: 2.5rem">
                    <i class="pi pi-exclamation-triangle text-red-500 text-xl"></i>
                </div>
            </div>
            <div class="text-900 font-bold text-3xl mb-3">{{ produtosBaixoEstoque }}</div>
            <span class="text-500 text-sm">Itens com menos de 10 un.</span>

            <div class="mt-3">
                <p-button label="Ver Itens" icon="pi pi-search" styleClass="p-button-sm p-button-danger w-full"
                    (click)="mostrarBaixoEstoque()" [disabled]="produtosBaixoEstoque === 0">
                </p-button>
            </div>
        </p-card>
    </div>

    <div class="col-12">
        <p-card header="Filtro de Período" styleClass="p-card-secondary">
            <div class="formgrid grid">
                <div class="field col-12 md:col-4">
                    <label for="dataInicio">Data Início</label>
                    <p-calendar id="dataInicio" [(ngModel)]="dataInicio" [showIcon]="true" dateFormat="dd/mm/yy"
                        styleClass="w-full"></p-calendar>
                </div>

                <div class="field col-12 md:col-4">
                    <label for="dataFim">Data Fim</label>
                    <p-calendar id="dataFim" [(ngModel)]="dataFim" [showIcon]="true" dateFormat="dd/mm/yy"
                        styleClass="w-full"></p-calendar>
                </div>

                <div class="field col-12 md:col-4 flex align-items-end gap-2">
                    <p-button label="Filtrar" icon="pi pi-filter" (click)="aplicarFiltro()"></p-button>

                    <p-button label="Limpar" icon="pi pi-filter-slash" styleClass="p-button-outlined"
                        (click)="limparFiltros()">
                    </p-button>
                </div>
            </div>
        </p-card>
    </div>

    <div class="col-12 md:col-7">
        <p-card header="Top 5 Produtos (No Período)">
            <div class="flex justify-content-center">
                <p-chart type="bar" [data]="topProdutosData" [options]="topProdutosOptions" width="100%"
                    height="300px"></p-chart>
            </div>
        </p-card>
    </div>

    <div class="col-12 md:col-5">
        <p-card header="Visão Geral do Estoque Ativo">
            <div class="flex justify-content-center">
                <p-chart type="doughnut" [data]="estoqueData" [options]="estoqueOptions" width="100%"
                    height="300px"></p-chart>
            </div>
        </p-card>
    </div>
</div>

<p-dialog [(visible)]="baixoEstoqueDialogVisible" [style]="{width: '600px'}" header="Produtos com Estoque Crítico"
    [modal]="true">
    <p-table [value]="produtosBaixoEstoqueLista" responsiveLayout="scroll" [rows]="5" [paginator]="true">
        <ng-template pTemplate="header">
            <tr>
                <th>Código</th>
                <th>Nome</th>
                <th>Qtd. Atual</th>
                <th>Categoria</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-produto>
            <tr>
                <td>{{produto.codigo}}</td>
                <td>{{produto.nome}}</td>
                <td>
                    <p-tag [value]="produto.quantidadeEstoque" severity="danger"></p-tag>
                </td>
                <td>{{produto.categoria}}</td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="4">Nenhum produto em estoque baixo (abaixo de 10).</td>
            </tr>
        </ng-template>
    </p-table>
</p-dialog>